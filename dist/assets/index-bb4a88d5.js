(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))u(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&u(l)}).observe(document,{childList:!0,subtree:!0});function d(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function u(s){if(s.ep)return;s.ep=!0;const a=d(s);fetch(s.href,a)}})();document.addEventListener("DOMContentLoaded",function(){const f=document.querySelector(".loading");setTimeout(()=>{f.classList.add("hidden"),setTimeout(()=>{f.style.display="none"},500)},2e3),AOS.init({duration:1e3,once:!0,offset:100});const i=document.getElementById("finalWish");let d=!1;function u(){const e=window.pageYOffset||document.documentElement.scrollTop,t=document.documentElement.scrollHeight-window.innerHeight;e/t*100>=80&&!d&&(d=!0,i.style.opacity="1",i.style.transform="translateY(0)",typeof AOS<"u"&&AOS.refresh(),setTimeout(()=>{i.style.animation="finalWishAppear 2s ease-out"},100))}i&&(i.style.opacity="0",i.style.transform="translateY(100px)",i.style.transition="opacity 1s ease-out, transform 1s ease-out"),window.addEventListener("scroll",u);const s=document.createElement("style");s.textContent=`
        @keyframes finalWishAppear {
            0% {
                opacity: 0;
                transform: translateY(100px) scale(0.8);
            }
            50% {
                opacity: 0.5;
                transform: translateY(-20px) scale(1.05);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
    `,document.head.appendChild(s),new Typed(".typed-text",{strings:["Đêm Trăng Tròn Đoàn Viên","Tình Yêu Thương Gia Đình","Niềm Vui Trẻ Thơ","Hạnh Phúc Sum Vầy","Đi kiếm gấu mà chơi trung thu đi ","FA bùn lắm :((("],typeSpeed:50,backSpeed:30,backDelay:2e3,loop:!0});const a=document.getElementById("backgroundMusic"),l=document.getElementById("toggleMusic");let c=!1,r=null;a.volume=.3;function v(){r||(r=a.play(),r!==void 0&&r.then(()=>{c=!0,l.textContent="♫ Tắt Nhạc",console.log("Nhạc đang phát tự động"),r=null}).catch(function(e){console.log("Không thể tự động phát nhạc:",e),r=null,document.addEventListener("click",m,{once:!0}),document.addEventListener("scroll",m,{once:!0}),document.addEventListener("mousemove",m,{once:!0})}))}function m(){!c&&!r&&(r=a.play(),r!==void 0&&r.then(()=>{c=!0,l.textContent="♫ Tắt Nhạc",console.log("Nhạc đã phát sau tương tác"),r=null}).catch(function(e){console.log("Không thể phát nhạc sau tương tác:",e),r=null}))}v(),l.addEventListener("click",function(){c?(a.pause(),c=!1,l.textContent="♫ Bật Nhạc"):(r=a.play(),r!==void 0?r.then(()=>{c=!0,l.textContent="♫ Tắt Nhạc",r=null}).catch(function(e){console.log("Không thể phát nhạc:",e),r=null}):(c=!0,l.textContent="♫ Tắt Nhạc"))}),document.querySelectorAll(".lantern").forEach((e,t)=>{e.style.animationDelay=`${t*.5}s`}),window.addEventListener("scroll",function(){const e=window.pageYOffset,t=document.querySelector(".moon");t&&(t.style.transform=`translateY(${e*.3}px)`);const o=document.querySelector(".fairy"),n=document.querySelector(".rabbit");o&&(o.style.transform=`translateY(${e*.2}px)`),n&&(n.style.transform=`translateY(${e*.25}px)`)}),document.querySelectorAll(".wish-card").forEach(e=>{e.addEventListener("mouseenter",function(){this.style.transform="translateY(-10px) scale(1.05)",this.style.transition="all 0.3s ease"}),e.addEventListener("mouseleave",function(){this.style.transform="translateY(0) scale(1)"})});const b=document.querySelector(".stars-container"),x=100;for(let e=0;e<x;e++){const t=document.createElement("div");t.classList.add("star"),t.style.top=Math.random()*100+"%",t.style.left=Math.random()*100+"%",t.style.animationDelay=Math.random()*1+"s",t.style.animationDuration=1+Math.random()*1+"s",b.appendChild(t)}const h=document.querySelectorAll(".mooncake");h.forEach((e,t)=>{e.addEventListener("mouseenter",function(){this.style.transform="scale(1.2) rotate(10deg)",this.style.transition="all 0.3s ease"}),e.addEventListener("mouseleave",function(){this.style.transform="scale(1) rotate(0deg)"}),e.addEventListener("click",function(){this.style.animation="none",this.style.transform="scale(1.5) rotate(360deg)",setTimeout(()=>{this.style.animation="mooncakeFloat 4s ease-in-out infinite",this.style.transform="scale(1) rotate(0deg)"},500)})});const y=document.querySelectorAll(".floating-lantern");y.forEach((e,t)=>{e.addEventListener("mouseenter",function(){this.style.transform="scale(1.2) rotate(10deg)",this.style.filter="brightness(1.5)"}),e.addEventListener("mouseleave",function(){this.style.transform="scale(1) rotate(0deg)",this.style.filter="brightness(1)"})}),y.forEach((e,t)=>{const o=["radial-gradient(#ff4757, #ff3838)","radial-gradient(#ffa502, #ff6348)","radial-gradient(#ff6b9d, #ee5a6f)","radial-gradient(#3742fa, #2f3542)","radial-gradient(#26de81, #20bf6b)","radial-gradient(#a55eea, #8854d0)"];e.style.background=o[Math.floor(Math.random()*o.length)],e.addEventListener("mouseenter",function(){this.style.filter="brightness(1.5)",this.style.transform="scale(1.1)"}),e.addEventListener("mouseleave",function(){this.style.filter="brightness(1)",this.style.transform="scale(1)"})});const p=document.querySelectorAll(".kumquat-tree");p.forEach((e,t)=>{for(let o=0;o<5;o++){const n=document.createElement("div");n.style.position="absolute",n.style.width="8px",n.style.height="8px",n.style.background="#ffd700",n.style.borderRadius="50%",n.style.top=20+Math.random()*40+"px",n.style.left=20+Math.random()*40+"px",n.style.boxShadow="0 0 5px rgba(255, 215, 0, 0.8)",n.style.animation="twinkle 2s ease-in-out infinite",n.style.animationDelay=Math.random()*2+"s",e.appendChild(n)}}),window.addEventListener("scroll",function(){const e=window.pageYOffset;y.forEach((t,o)=>{const n=.3+o*.1;t.style.transform=`translateY(${e*n}px)`}),h.forEach((t,o)=>{const n=.2+o*.05;t.style.transform=`translateY(${e*n}px)`}),p.forEach((t,o)=>{const n=.1+o*.05;t.style.transform=`translateY(${e*n}px)`})});function w(){const e=document.createElement("div");e.classList.add("firework"),e.style.top=Math.random()*50+"%",e.style.left=Math.random()*100+"%",e.style.animationDelay="0s";const t=["#ffd700","#ff69b4","#00ff00","#ff4500","#1e90ff"],o=t[Math.floor(Math.random()*t.length)];e.style.background=o,document.querySelector(".fireworks").appendChild(e),setTimeout(()=>{e.remove()},3e3)}setInterval(w,5e3);const g=document.getElementById("toggleOpacity");g&&(g.style.display="none"),document.addEventListener("click",function(e){const t=document.createElement("div");t.style.position="absolute",t.style.width="20px",t.style.height="20px",t.style.background="rgba(255, 215, 0, 0.6)",t.style.borderRadius="50%",t.style.left=e.clientX-10+"px",t.style.top=e.clientY-10+"px",t.style.pointerEvents="none",t.style.animation="fireworkExplode 1s ease-out",t.style.zIndex="9999",document.body.appendChild(t),setTimeout(()=>{t.remove()},1e3)});const L=document.querySelectorAll(".japanese-text");function E(){L.forEach((e,t)=>{const o=Math.random()*8,n=9+Math.random()*4,M=12+t*20+(Math.random()*8-4),S=t%2===0?"left":"right",T=1+Math.random()*3;e.style.animationDelay=o+"s",e.style.animationDuration=n+"s",e.style.bottom=Math.max(10,Math.min(80,M))+"%",e.style[S]=T+"%",e.style.animationName="randomFloat"})}E(),setInterval(E,12e3)});
